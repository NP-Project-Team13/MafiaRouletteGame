# Mafia Roulette Game

## 기본 로직 구현 (Shoot까지 구현) 완료했습니다

---

## 코드 설명

### 1. MafiaServer

**역할**:  
메인 서버로, 클라이언트의 연결을 관리하고 게임의 전체 로직(턴 관리, 라운드 관리, 게임 종료 여부 판단)을 처리합니다.

**주요 기능**:
- **클라이언트 연결**:
  - 최대 4명의 클라이언트를 기다리며, 연결이 완료되면 게임을 시작합니다.
- **닉네임 대기**:
  - 모든 클라이언트가 닉네임을 입력할 때까지 대기합니다.
- **팀 및 캐릭터 할당**:
  - 각 클라이언트를 두 개의 팀(A, B)으로 나누고, 랜덤으로 캐릭터를 할당합니다.
- **게임 진행**:
  - 턴과 라운드를 관리하며, 각 클라이언트의 행동을 처리합니다 (총 쏘기, 능력 사용).
- **총알 관리**:
  - 총알은 `Gun` 클래스를 통해 관리되며, 총알이 모두 사용되었을 때 자동으로 추가됩니다.

---

### 2. MafiaClient

**역할**:  
클라이언트의 게임 참여를 관리하며, 서버와의 통신을 통해 게임에 필요한 정보를 주고받습니다.

**주요 기능**:
- **서버 연결**:
  - 서버 주소와 포트를 입력받아 연결을 설정합니다.
- **닉네임 입력**:
  - 클라이언트는 실행 시 닉네임을 입력하고 서버로 전송합니다.
- **행동 처리**:
  - 서버로부터 턴 알림을 받으면, "총 쏘기" 또는 "능력 사용"을 선택하여 행동을 전송합니다.
- **결과 출력**:
  - 서버에서 수신한 메시지를 처리하고, 게임의 진행 상황을 출력합니다.

---

### 3. ClientHandler

**역할**:  
각 클라이언트를 개별적으로 관리하는 스레드로, 서버와 클라이언트 간의 데이터 송수신을 처리합니다.

**주요 기능**:
- **닉네임 수신**:
  - 클라이언트가 전송한 닉네임을 수신하고 저장합니다.
- **행동 처리**:
  - 클라이언트로부터 행동 데이터를 받아 서버의 `handleShoot` 또는 `handleUseAbility` 메서드를 호출합니다.
- **메시지 전송**:
  - 서버에서 처리된 결과를 클라이언트에게 전송합니다.

---

### 4. Gun

**역할**:  
총알과 실린더(8개의 슬롯)를 관리하며, 총알이 다 떨어졌을 때 자동으로 추가됩니다.

**주요 기능**:
- **실린더 초기화**:
  - 현재 총알 개수에 따라 실린더를 초기화하고, 총알의 위치를 랜덤하게 설정합니다.
- **총 쏘기**:
  - 실린더에서 한 슬롯을 선택하여 총알이 있는지 확인합니다.
  - 총알이 다 떨어지면 자동으로 총알 개수를 증가시키고 실린더를 초기화합니다.
- **총알 증가**:
  - 라운드가 진행될수록 총알 개수를 1씩 증가시키며, 최대 8개로 제한됩니다.

---

### 5. JsonUtil

**역할**:  
서버와 클라이언트 간 데이터를 JSON 형식으로 변환하거나, JSON 데이터를 객체로 변환합니다.

**주요 기능**:
- **객체 → JSON 변환**:
  - `ClientAction` 및 `ServerResponse` 객체를 JSON 형식으로 변환합니다.
- **JSON → 객체 변환**:
  - JSON 형식 데이터를 `ClientAction` 또는 `ServerResponse` 객체로 변환합니다.

---

## 실행 방법

### 서버 실행
1. `MafiaServer` 클래스 실행.
2. 서버가 시작되면 클라이언트 연결을 기다립니다.

### 클라이언트 실행
1. `MafiaClient` 클래스 실행.
2. 서버 주소와 포트 입력 (기본값: `localhost`, `12345`).
3. 닉네임 입력 후 서버와 연결.

---

## Intellij 사용 시 한 PC에서 여러 Client 코드 실행 방법

1. **IntelliJ 메뉴에서**:
   - 상단 메뉴에서 **실행 → 구성 편집** 선택.
2. **새 구성 추가**:
   - **어플리케이션** 선택 후, 클래스 지정에 `MafiaClient.java` 입력.
3. **구성 복사**:
   - 하나를 생성한 후, **구성 복사**를 사용하여 최대 4개까지 생성.
4. **각 구성 실행**:
   - 생성된 각 구성을 실행하여 여러 클라이언트를 실행합니다.

테스트 해보시고 피드백 부탁드립니다! CLI 환경에서 돌아가도록만 구현해서 추가적으로 Swing과 각 캐릭터별 능력 구현해야 할 것 같습니다.
